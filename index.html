<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css"
      integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="theme.css" />
    <link rel="stylesheet" href="style.css" />
    <title>Todo List</title>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
  </head>
  <body>
    <!-- Alert Modal -->
    <div class="custom-modal" id="alert-modal" style="display: none;">
      <div class="custom-modal-container">
        <div class="custom-modal-header">
          <h3 class="custom-modal-title" id="alert-modal-title">Alert</h3>
        </div>
        <div class="custom-modal-body">
          <p class="custom-modal-message" id="alert-modal-message"></p>
        </div>
        <div class="custom-modal-footer">
          <button class="custom-modal-btn custom-modal-confirm" id="alert-modal-ok" type="button">
            OK
          </button>
        </div>
      </div>
    </div>

    <!-- Confirm Modal -->
    <div class="custom-modal" id="confirm-modal" style="display: none;">
      <div class="custom-modal-container">
        <div class="custom-modal-header">
          <h3 class="custom-modal-title" id="confirm-modal-title">Confirm</h3>
        </div>
        <div class="custom-modal-body">
          <p class="custom-modal-message" id="confirm-modal-message"></p>
        </div>
        <div class="custom-modal-footer">
          <button class="custom-modal-btn custom-modal-cancel" id="confirm-modal-cancel" type="button">
            Cancel
          </button>
          <button class="custom-modal-btn custom-modal-confirm" id="confirm-modal-confirm" type="button">
            Confirm
          </button>
        </div>
      </div>
    </div>

    <!-- Prompt Modal -->
    <div class="custom-modal" id="prompt-modal" style="display: none;">
      <div class="custom-modal-container">
        <div class="custom-modal-header">
          <h3 class="custom-modal-title" id="prompt-modal-title">Input</h3>
        </div>
        <div class="custom-modal-body">
          <p class="custom-modal-message" id="prompt-modal-message"></p>
          <input 
            type="text" 
            class="custom-modal-input" 
            id="prompt-modal-input"
            placeholder="Enter value..."
          />
        </div>
        <div class="custom-modal-footer">
          <button class="custom-modal-btn custom-modal-cancel" id="prompt-modal-cancel" type="button">
            Cancel
          </button>
          <button class="custom-modal-btn custom-modal-confirm" id="prompt-modal-ok" type="button">
            OK
          </button>
        </div>
      </div>
    </div>

    <!-- Edit Todo Modal -->
    <div class="notes-modal" id="edit-todo-modal" style="display: none;">
      <div class="notes-modal-container">
        <div class="notes-modal-header">
          <h3 class="notes-modal-title">Edit Task</h3>
          <button class="notes-modal-close" id="edit-todo-close" type="button" title="Close">
            <i class="fa-solid fa-times"></i>
          </button>
        </div>
        <div class="notes-modal-body">
          <textarea 
            id="edit-todo-textarea" 
            class="notes-textarea" 
            placeholder="Edit your task (supports @who #what !priority)..."
            rows="3"
          ></textarea>
        </div>
        <div class="notes-modal-footer">
          <button class="notes-modal-btn notes-modal-delete" id="edit-todo-delete" type="button">
            Delete Task
          </button>
          <div class="notes-modal-actions">
            <button class="notes-modal-btn notes-modal-cancel" id="edit-todo-cancel" type="button">
              Cancel
            </button>
            <button class="notes-modal-btn notes-modal-save" id="edit-todo-save" type="button">
              Save
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Notes Modal -->
    <div class="notes-modal" id="notes-modal" style="display: none;">
      <div class="notes-modal-container">
        <div class="notes-modal-header">
          <h3 class="notes-modal-title">Edit Notes</h3>
          <button class="notes-modal-close" id="notes-modal-close" type="button" title="Close">
            <i class="fa-solid fa-times"></i>
          </button>
        </div>
        <div class="notes-modal-body">
          <textarea 
            id="notes-textarea" 
            class="notes-textarea" 
            placeholder="Enter notes here... (supports multiple lines)"
            rows="8"
          ></textarea>
        </div>
        <div class="notes-modal-footer">
          <button class="notes-modal-btn notes-modal-delete" id="notes-modal-delete" type="button">
            Delete Notes
          </button>
          <div class="notes-modal-actions">
            <button class="notes-modal-btn notes-modal-cancel" id="notes-modal-cancel" type="button">
              Cancel
            </button>
            <button class="notes-modal-btn notes-modal-save" id="notes-modal-save" type="button">
              Save
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Login Modal -->
    <div class="login-modal" id="login-modal">
      <div class="login-container">
        <div class="login-content">
          <h2 class="login-title">Dashboard Access</h2>
          <p class="login-subtitle">Enter your codename to continue</p>
          <form id="login-form" class="login-form">
            <div class="login-input-group">
              <input
                type="text"
                id="codename-input"
                class="codename-input"
                placeholder="Codename"
                autocomplete="off"
                required
              />
            </div>
            <div class="login-error" id="login-error"></div>
            <button type="submit" class="login-button">
              Access Dashboard
            </button>
          </form>
          <p class="login-hint">This is a personal dashboard protected by codename authentication</p>
        </div>
      </div>
    </div>

    <header class="app-header">
      <div class="header-content">
        <h1 class="app-title">Dashboard</h1>
        <nav class="header-nav">
          <a href="breather-app/index.html?from=dashboard" class="header-icon" title="Breathing Exercises" aria-label="Breathing Exercises">
            <i class="fa-solid fa-spa"></i>
          </a>
          <button class="header-icon logout-btn" id="logoutBtn" title="Logout" aria-label="Logout">
            <i class="fa-solid fa-sign-out-alt"></i>
          </button>
        </nav>
      </div>
    </header>

    <div class="container">
      <div class="terminal-bar">
        <div class="habits-tracker">
          <button class="habit-icon" data-habit="exercise" title="Exercise" aria-label="Mark exercise as done">
            <i class="fa-solid fa-dumbbell"></i>
          </button>
          <button class="habit-icon" data-habit="learn" title="Learn" aria-label="Mark learning as done">
            <i class="fa-solid fa-graduation-cap"></i>
          </button>
          <button class="habit-icon" data-habit="walk" title="Go for a walk" aria-label="Mark walk as done">
            <i class="fa-solid fa-person-walking"></i>
          </button>
          <button class="habit-icon" data-habit="mindfulness" title="Mindfulness" aria-label="Mark mindfulness as done">
            <i class="fa-solid fa-leaf"></i>
          </button>
          <button class="habit-icon" data-habit="vitamins" title="Take vitamins" aria-label="Mark vitamins as done">
            <i class="fa-solid fa-pills"></i>
          </button>
          <button class="habit-icon" data-habit="water" title="Drink water" aria-label="Mark water as done">
            <i class="fa-solid fa-droplet"></i>
          </button>
        </div>
        <div class="terminal-meta">
          <span id="terminal-clock"></span>
        </div>
      </div>
      <div class="terminal-body">
      <form id="todo-form">
        <div class="form-row">
          <input
            type="text"
            class="form-input"
            id="todo-input"
            name="todo"
            placeholder="new todo (supports @who #what !priority)…"
          />
          <button type="submit" class="submit-arrow" title="Add Task">
            <i class="fa-solid fa-arrow-right"></i>
          </button>
          <select id="priority-select" class="priority-select" style="display: none;">
            <option value="low" selected>Low Priority</option>
            <option value="medium">Medium Priority</option>
            <option value="high">High Priority</option>
          </select>
        </div>
      </form>
      
      <div class="task-controls">
        <div class="task-search-container">
          <i class="fa-solid fa-search task-search-icon"></i>
          <input 
            type="text" 
            id="task-search" 
            class="task-search-input" 
            placeholder="Filter tasks..."
            autocomplete="off"
          />
        </div>
        <div class="task-right-controls">
          <span class="task-stats" id="task-stats" title="a=active d=done today l=logs today q=quotes today">
            <span class="stat-active">0a</span>
            <span class="stat-done">0d</span>
            <span class="stat-logs">0l</span>
            <span class="stat-quotes">0q</span>
          </span>
          <div class="task-control-buttons">
            <button id="reminders-btn" class="task-control-btn" type="button" title="Show Reminders" aria-label="Show Reminders">
              <i class="fa-solid fa-clock"></i>
            </button>
            <button id="reorder-btn" class="task-control-btn" type="button" title="Reorder Todos" aria-label="Toggle reorder mode">
              <i class="fa-solid fa-arrows-up-down"></i>
            </button>
            <button id="archive-btn" class="task-control-btn" type="button" title="Show Archived Tasks" aria-label="Show Archived Tasks">
              <i class="fa-solid fa-box-archive"></i>
            </button>
          </div>
        </div>
      </div>
      
      <ul id="todo-list" class="todos">
      </ul>
      <ul id="reminders-list" class="todos" style="display:none;"></ul>
      <ul id="archived-list" class="todos" style="display:none;"></ul>

      <!-- Filter and Pagination Controls -->
      <div class="todo-controls-bottom">
        <!-- Priority Filters -->
        <div class="priority-filters">
          <button id="priority-filter-all" class="priority-filter-btn active" type="button" title="Show all priorities">
            <span class="priority-filter-bubble priority-filter-all"></span>
            <span class="priority-filter-label">All</span>
          </button>
          <button id="priority-filter-high" class="priority-filter-btn" type="button" title="Show high priority only">
            <span class="priority-filter-bubble priority-high"></span>
            <span class="priority-filter-label">High</span>
          </button>
          <button id="priority-filter-medium" class="priority-filter-btn" type="button" title="Show medium priority only">
            <span class="priority-filter-bubble priority-medium"></span>
            <span class="priority-filter-label">Medium</span>
          </button>
          <button id="priority-filter-low" class="priority-filter-btn" type="button" title="Show low priority only">
            <span class="priority-filter-bubble priority-low"></span>
            <span class="priority-filter-label">Low</span>
          </button>
        </div>

        <!-- Pagination Controls -->
        <div id="pagination-container" class="pagination-container" style="display: none;">
          <button id="pagination-prev" class="pagination-btn" type="button" title="Previous page">
            <i class="fa-solid fa-chevron-left"></i>
          </button>
          <span id="pagination-info" class="pagination-info"></span>
          <button id="pagination-next" class="pagination-btn" type="button" title="Next page">
            <i class="fa-solid fa-chevron-right"></i>
          </button>
        </div>
      </div>

      <!-- Modules Section -->
      <div class="modules-section">
        <div class="modules-header">
          <h2 class="modules-title">Modules</h2>
          <div class="modules-search-container">
            <i class="fa-solid fa-search modules-search-icon"></i>
            <input 
              type="text" 
              id="modules-search" 
              class="modules-search-input" 
              placeholder="Filter modules..."
              autocomplete="off"
            />
          </div>
        </div>
        <div id="modules-grid" class="modules-grid">
          <!-- Modules will be dynamically added here -->
        </div>
      </div>

      </div>
    </div>

    <footer class="app-footer" role="contentinfo">
      <div class="footer-content">
        <div class="footer-info">
          <div class="trademark-container">
            <span class="trademark" id="trademark-text">© 2025 Cutlac Dev App. All rights reserved.</span>
            <div class="advice-tooltip" id="advice-tooltip">
              <p id="advice-text"></p>
            </div>
          </div>
          <div class="version-container">
            <span class="version-number" id="version-number">v3.0-dev</span>
            <div class="version-tooltip" id="version-tooltip">
              <p id="version-hash-text"></p>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <script src="storage.js?v=2.1"></script>
    <script src="auth.js?v=1.0"></script>
    <script src="script.js?v=2.1"></script>
  </body>
</html>
